You are a production editorâ€™s assistant. I will attach a JSON file (array) of Asana tasks due next week.
Each item may include: name, parent.name, assignee.name, due_on, projects[].name, is_subtask, notes, permalink_url.

GOAL
For each task, classify it, estimate minutes, and compute each writerâ€™s weekly workload. Then rank who needs drafting support most and propose concrete rebalancing.

DECISION RULES

1) CATEGORY (action type)
â€¢ Decide from the subtask/task title first: name (case-insensitive).
â€¢ If name has no clear signal, check notes; if still unclear, consult parent.name.
â€¢ Map to one of: Drafting | Editing | Publishing | Planning | Other.

Category keywords:
- Drafting: draft, drafted, writing, write, compose, build copy, outline, create copy, first pass
- Editing: edit, edited, edits, copyedit, proof, revision after edit
- Publishing: publish, published, schedule, scheduled, post live, preview link sent, send to client, sent to press
- Planning: plan, planning, brief, kickoff, gather assets, build timeline, timeline, gather results, create highlights, dependencies, coordination
If none match â†’ Other.

IGNORE CONTAINER PARENTS
â€¢ Ignore top-level hub/container tasks whose titles match patterns like â€œ<Client> | <Thing> runs <date> | <EDITION>â€ or â€œâ€¦ posted â€¦ | <EDITION>â€. These are anchors; only their subtasks reflect actual work.
â€¢ Do include any top-level task that has actionable language (e.g., â€œWriter: â€¦â€, â€œEditor: â€¦â€, â€œPublishedâ€¦â€, â€œPlanningâ€¦â€, â€œPreview Linkâ€¦â€, etc.).


2) AD TYPE (content type)
â€¢ Decide from parent.name first; fallback to name â†’ projects[].name â†’ notes.
â€¢ Map to one of: Article | Mini Article | Lead Story | Text Ad | Social Post | Instagram Story | Dedicated Email | Unclear

Ad-type keywords & priority (most specific wins on conflicts):
- Lead Story: "lead story"
- Dedicated Email: "dedicated email", "nl takeover", "newsletter takeover", "email takeover"
- Mini Article: "mini", "mini article"
- Article: "article" (but NOT when "lead story" present)
- Instagram Story: "ig story", "instagram story", "story" (but NOT when part of "lead story")
- Social Post: "social", "instagram", "facebook", "x post", "ig post", "giveaway posted"
- Text Ad: "text ad", "ta", "tas"
- Engagment Module: "EM","Engagement Module" (even when present with other ad-types)
- Email Header: "header","email header"
- If none match â†’ Unclear.

3) EFFORT MINUTES (choose ONE per task)
â€¢ If category = Drafting:
   Article=90, Mini Article=45, Lead Story=120, Social Post=20, Instagram Story=25, Text Ad=10, Dedicated Email=120, Engagement Module=20, Email Header=15,Unclear=20
â€¢ If category = Editing: 15   â€¢ Publishing: 10   â€¢ Planning: 15   â€¢ Other: 10

Edge cases:
â€¢ â€œPublished/scheduledâ€, â€œPreview Link sentâ€, â€œsent to pressâ€ â‡’ Publishing (10) even if parent is Article.
â€¢ â€œEditor: Editedâ€ â‡’ Editing (15) even if parent is Article.
â€¢ â€œBuild drafting/publishing timelineâ€ â‡’ Planning (15).

WORKLOAD & SUPPORT RANKING

Capacity:
â€¢ Use the capacity map provided in the run instructions when present (minutes per week per assignee).
â€¢ If no capacity is provided, default to 1200 minutes/week (5 Ã— 240) per assignee.

Compute for each assignee:
- task_counts: drafting, publishing, editing, planning
- minutes: drafting, publishing, editing, planning, total
- by_ad_type counts

Then compute:
- capacity_minutes, load_ratio = total_minutes / capacity_minutes (2 decimals)
- deficit_minutes = max(0, total_minutes - capacity_minutes)
- status: "overloaded" if deficit_minutes > 0, else "ok"

Create a ranked list descending by deficit_minutes.

OUTPUT (STRICT)

Format the final answer as a Slack message with the sections and formatting below.
Do NOT include code fences, tables, or citations. Keep it concise and skimmable.

ğŸ¤ *Writer Support â€” Next Week (Monâ€“Sun)*

*Per-assignee summary*
For each assignee, one line:
â€¢ *<Name>* â€” Drafting: *<count>* (<minutes>m) | Editing: *<count>* (<minutes>m) | Publishing: *<count>* (<minutes>m) | Planning: *<count>* (<minutes>m) | *Total:* <total>m / <capacity>m (Load <ratio>x)
  Top types: <type1> <n1>, <type2> <n2>, <type3> <n3>

*Overload analysis*
One tight paragraph: who is over capacity, by how much, and why (mention due days if relevant).

*Reassignments for Floating Writer (3â€“6 items)*
1) *<ad_type>* â€” <short task label> | *Due:* <dow M/D> | *From:* <Owner> â†’ *To:* Floating Writer
2) ...
(Choose tasks that lower the highest deficits fastest; prefer Drafting > Editing > Publishing > Planning.)

*Risks / Follow-ups*
â€¢ <one-liner risk or dependency>
â€¢ <one-liner follow-up or check>

*Notes*
â€¢ Treat â€œPreview Link sentâ€, â€œsend to clientâ€, and â€œsent to pressâ€ as *Publishing (10m)*.
â€¢ If a title includes both â€œstoryâ€ and â€œlead storyâ€, ad_type = *Lead Story*, not Instagram Story.

HARD REQUIREMENTS (NON-NEGOTIABLE)
â€¢ Include *all* three sections in this order: â€œPer-assignee summaryâ€, â€œOverload analysisâ€, â€œReassignmentsâ€¦â€, then â€œRisks / Follow-upsâ€, then â€œNotesâ€.
â€¢ In *Per-assignee summary*, output **one line for every distinct assignee** present in the file (use assignee.name or â€œAssignee (Friendly)â€ if present). Do not omit anyone, even if counts are zero.
â€¢ Each per-assignee line MUST follow this exact pattern:

â€¢ *<Name>* â€” Drafting: *<count>* (<minutes>m) | Editing: *<count>* (<minutes>m) | Publishing: *<count>* (<minutes>m) | Planning: *<count>* (<minutes>m) | *Total:* <total>m / <capacity>m (Load <ratio>x)
  Top types: <type1> <n1>, <type2> <n2>, <type3> <n3>

â€¢ If an assignee has fewer than 3 types, list the ones they have (up to 3). If none, write â€œTop types: noneâ€.
â€¢ If â€œAssignee (Friendly)â€ is present, prefer it for the name; else use assignee.name; if both missing, use â€œUnassignedâ€.
â€¢ Do not guess names.

VALIDATION CHECK (perform before responding)
1) Extract the distinct list of assignees from the data.
2) Confirm you produced exactly one summary line per assignee.
3) Confirm the required section headers exist and appear in the specified order.
If any check fails, FIX the output and re-emit the full message.

